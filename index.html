<html>
<head>
	<title>Game 2D</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #000000;
		}
	</style>
	<script type="text/javascript" src="assets/scripts/pixi/pixi.js"></script>

	<script type="text/javascript" src="assets/scripts/jquery/jquery-1.10.2.min.js"></script>

	<script type="text/javascript" src="assets/scripts/stats/stats.min.js"></script>

	<script type="text/javascript" src="assets/scripts/tween/jquery.gsap.min.js"></script>
	<script type="text/javascript" src="assets/scripts/tween/TimelineLite.min.js"></script>
	<script type="text/javascript" src="assets/scripts/tween/TimelineMax.min.js"></script>
	<script type="text/javascript" src="assets/scripts/tween/TweenLite.min.js"></script>
	<script type="text/javascript" src="assets/scripts/tween/TweenMax.min.js"></script>
	<script type="text/javascript" src="assets/scripts/tween/easing/EasePack.min.js"></script>

	<script type="text/javascript" src="assets/scripts/pathfinding/pathfinding-browser.min.js"></script>

	<script type="text/javascript" src="assets/scripts/input.class.js"></script>

	<script type="text/javascript" src="assets/scripts/directions.enum.js"></script>
	<script type="text/javascript" src="assets/scripts/cursors.enum.js"></script>

	<script type="text/javascript" src="assets/scripts/point.class.js"></script>

	<script type="text/javascript" src="assets/scripts/gui.class.js"></script>	

	<script type="text/javascript" src="assets/scripts/game.class.js"></script>
	<script type="text/javascript" src="assets/scripts/action.class.js"></script>
	<script type="text/javascript" src="assets/scripts/map.class.js"></script>
	<script type="text/javascript" src="assets/scripts/camera.class.js"></script>
	<script type="text/javascript" src="assets/scripts/tile.class.js"></script>
	<script type="text/javascript" src="assets/scripts/creature.class.js"></script>
	<script type="text/javascript" src="assets/scripts/player.class.js"></script>
</head>
<body>
	<script>
		// STATS
		var stats = new Stats();
		stats.setMode(0); // 0: fps, 1: ms
		stats.domElement.style.position = 'absolute';
		stats.domElement.style.left = '0px';
		stats.domElement.style.top = '0px';
		document.body.appendChild(stats.domElement);

		var player;

		Game.initialize();

		var label = new PIXI.Text("Player", {font:"11px arial", fill:"#FFFFFF", stroke:"#000000", strokeThickness: 1});

		Map.load('assets/maps/test-1.json', function() {
			console.log('Done.');

			TweenLite.to(Game.mapContainer, 1, {
				alpha: 1,
				ease: Linear.easeNone,
				onComplete: callback
			});

			player = new Player("Mukah", Map.tiles[1].texture);
			player.setPosition(3, 3);
			player.onMove = function() {
				label.position = player.sprite.position;
				camera1.centerAt(player.sprite.position).focus();
			}
			Game.viewport.addChild(player.sprite);
			label.setText(player.name);
			Game.viewport.addChild(label);

			function callback() {
				console.log("Animation finished.");
				//camera2.smoothFocus();
			}
		});

		var camera1 = new Camera();
		camera1.centerAt(new PIXI.Point(500, 500));

		var camera2 = new Camera();
		camera2.centerAt(new PIXI.Point(1600, 1600));

		Game.onUpdate = function() {
			// O update Ã© executado antes do player ser instanciado.
			if(player.status == STATUS.IDLE) {
				if(Input.isDown(Input.KEY_DOWN)) {
					player.move(DIRECTIONS.DOWN);
				} else if(Input.isDown(Input.KEY_UP)) {
					player.move(DIRECTIONS.UP);
				} else if(Input.isDown(Input.KEY_LEFT)) {
					player.move(DIRECTIONS.LEFT);
				} else if(Input.isDown(Input.KEY_RIGHT)) {
					player.move(DIRECTIONS.RIGHT);
				}
			}
		};
	</script>
	</body>
</html>